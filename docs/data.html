<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data | The Meme Stock Portfolio</title>
  <meta name="description" content="Chapter 3 Data | The Meme Stock Portfolio" />
  <meta name="generator" content="bookdown 0.29 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data | The Meme Stock Portfolio" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data | The Meme Stock Portfolio" />
  
  
  

<meta name="author" content="Nathan Ho and Elie Dufeu Goldenberg" />


<meta name="date" content="2022-12-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="proposal.html"/>
<link rel="next" href="results.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">The Meme Stock Portfolior</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="proposal.html"><a href="proposal.html"><i class="fa fa-check"></i><b>2</b> Proposal</a>
<ul>
<li class="chapter" data-level="2.1" data-path="proposal.html"><a href="proposal.html#research-topic"><i class="fa fa-check"></i><b>2.1</b> Research topic</a></li>
<li class="chapter" data-level="2.2" data-path="proposal.html"><a href="proposal.html#data-availability"><i class="fa fa-check"></i><b>2.2</b> Data availability</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#sources"><i class="fa fa-check"></i><b>3.1</b> Sources</a></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#cleaning-transformation"><i class="fa fa-check"></i><b>3.2</b> Cleaning / transformation</a></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#missing-value-analysis"><i class="fa fa-check"></i><b>3.3</b> Missing Value Analysis</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>4</b> Results</a>
<ul>
<li class="chapter" data-level="4.1" data-path="results.html"><a href="results.html#comparing-the-portfolio-to-the-market"><i class="fa fa-check"></i><b>4.1</b> Comparing the Portfolio to the Market</a></li>
<li class="chapter" data-level="4.2" data-path="results.html"><a href="results.html#rsi-market-comparison"><i class="fa fa-check"></i><b>4.2</b> RSI Market Comparison</a></li>
<li class="chapter" data-level="4.3" data-path="results.html"><a href="results.html#analyzing-alpha-and-beta"><i class="fa fa-check"></i><b>4.3</b> Analyzing Alpha and Beta</a></li>
<li class="chapter" data-level="4.4" data-path="results.html"><a href="results.html#correlation-matrices"><i class="fa fa-check"></i><b>4.4</b> Correlation Matrices</a></li>
<li class="chapter" data-level="4.5" data-path="results.html"><a href="results.html#volume-analysis"><i class="fa fa-check"></i><b>4.5</b> Volume Analysis</a></li>
<li class="chapter" data-level="4.6" data-path="results.html"><a href="results.html#market-cap-analysis"><i class="fa fa-check"></i><b>4.6</b> Market Cap Analysis</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>5</b> Interactive component</a></li>
<li class="chapter" data-level="6" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">The Meme Stock Portfolio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="sources" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Sources<a href="data.html#sources" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As explained in the proposal we will work with financial meme stocks. The stocks we chose are the following: GME (GameStop Corp), AMC (AMC Entertainment Holdings Inc), BBBY (Bed Bath &amp; Beyond Inc), TLRY (Tilray Inc) and PLTR (Palantir Technologies Inc). They are all belong to either the NYSE or to the NASDAQ.</p>
<p>We will use the following packages for getting the data :</p>
<pre><code>##  [1] &quot;quantmod&quot;   &quot;tidyquant&quot;  &quot;pylr&quot;       &quot;dplyr&quot;      &quot;redav&quot;     
##  [6] &quot;tidyverse&quot;  &quot;remotes&quot;    &quot;naniar&quot;     &quot;rollRegres&quot; &quot;zoo&quot;       
## [11] &quot;plotly&quot;     &quot;tseries&quot;    &quot;ggplot2&quot;    &quot;reshape2&quot;   &quot;lubridate&quot; 
## [16] &quot;tidyr&quot;</code></pre>
<p>We then use the QuantMod package to obtain our data. We use a date range from January 1, 2022 to the most recent date (December 14, 2022) for our stocks to get our YTD (Year to Date) data. Let’s see what values does the quantmod packages returns.</p>
<pre><code>## [1] &quot;GME&quot;</code></pre>
<pre><code>## [1] &quot;AMC&quot;</code></pre>
<pre><code>## [1] &quot;BBBY&quot;</code></pre>
<pre><code>## [1] &quot;TLRY.TO&quot;</code></pre>
<pre><code>## [1] &quot;PLTR&quot;</code></pre>
<pre><code>## [1] &quot;SPY&quot;</code></pre>
<pre><code>##            GME.Open GME.High GME.Low GME.Close GME.Volume GME.Adjusted
## 2022-01-03  37.3075  39.8450 37.3025   38.2100    5654800      38.2100
## 2022-01-04  38.0425  38.2475 35.7625   37.2275    7339600      37.2275
## 2022-01-05  37.0975  37.2125 32.2875   32.3425   13585600      32.3425
## 2022-01-06  33.2100  34.4250 30.2850   32.7575   24206000      32.7575
## 2022-01-07  39.9425  40.0775 33.1250   35.1550   48549200      35.1550
## 2022-01-10  33.7475  33.9225 30.0000   32.7875   22048000      32.7875</code></pre>
<p>As shown above, quantmod provides us the values of “Open”, “High”, “Low”, “Close”, “Volume” and “Adjusted” and Date for every day for each stock.</p>
<p>Let’s check the class of our data.</p>
<pre><code>## [1] &quot;xts&quot; &quot;zoo&quot;</code></pre>
<p>Let’s transform our xts into tables:</p>
<pre><code>## # A tibble: 6 × 6
##   GME.Open GME.High GME.Low GME.Close GME.Volume GME.Adjusted
##      &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;
## 1     37.3     39.8    37.3      38.2    5654800         38.2
## 2     38.0     38.2    35.8      37.2    7339600         37.2
## 3     37.1     37.2    32.3      32.3   13585600         32.3
## 4     33.2     34.4    30.3      32.8   24206000         32.8
## 5     39.9     40.1    33.1      35.2   48549200         35.2
## 6     33.7     33.9    30        32.8   22048000         32.8</code></pre>
<p>The dates are now missing but we can add them by using the index on our initial stocks :</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data.html#cb11-1" aria-hidden="true" tabindex="-1"></a>DATE <span class="ot">&lt;-</span> <span class="fu">index</span>(AMC)</span></code></pre></div>
<p>We can now add these dates to our tables :</p>
<pre><code>## # A tibble: 6 × 7
##   Date       AMC.Open AMC.High AMC.Low AMC.Close AMC.Volume AMC.Adjusted
##   &lt;date&gt;        &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;
## 1 2022-01-03     27.4     28.1    26.4      26.5   26740900         26.5
## 2 2022-01-04     26.7     26.7    24.6      25.5   33347900         25.5
## 3 2022-01-05     25.2     25.3    22.4      22.8   45172100         22.8
## 4 2022-01-06     23.0     23.8    20.8      22.5   59112700         22.5
## 5 2022-01-07     23.6     24.3    22.4      23.0   49481000         23.0
## 6 2022-01-10     22.4     22.9    21.2      22.8   37784000         22.8</code></pre>
</div>
<div id="cleaning-transformation" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Cleaning / transformation<a href="data.html#cleaning-transformation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First, we have to check if there are any missing values for each stock.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(gme))</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(amc))</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(bbby))</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(tlry))</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(pltr))</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">is.na</span>(spy))</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>There are no missing values in our stocks which is good for our data visualization pipeline.
We will now transform these stocks prices to calculate a new value: the return.</p>
<pre><code>## # A tibble: 6 × 7
##   Date       GME.Open GME.High GME.Low GME.Close GME.Volume GME.Adjusted
##   &lt;date&gt;        &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;
## 1 2022-01-03     37.3     39.8    37.3      38.2    5654800         38.2
## 2 2022-01-04     38.0     38.2    35.8      37.2    7339600         37.2
## 3 2022-01-05     37.1     37.2    32.3      32.3   13585600         32.3
## 4 2022-01-06     33.2     34.4    30.3      32.8   24206000         32.8
## 5 2022-01-07     39.9     40.1    33.1      35.2   48549200         35.2
## 6 2022-01-10     33.7     33.9    30        32.8   22048000         32.8</code></pre>
<p>We can also calculate the rolling beta and alpha of a stock as well. This will be important, as beta tells us how an individual stock performs relative to the market, while alpha tells us the stock’s excess return. We use a rolling window of 30. We also get the simple moving average (SMA) of our newly created portfolio to detected long-term trends. Finally, we calculate RSI (we base our code off this website: <a href="https://bookdown.org/kochiuyu/technical-analysis-with-r-second-edition2/relative-strength-index-rsi.html" class="uri">https://bookdown.org/kochiuyu/technical-analysis-with-r-second-edition2/relative-strength-index-rsi.html</a>) to compare the performance of our portfolio with the SP500</p>
<pre><code>## [1] &quot;Portfolio Moving Average (First 5 Values):&quot;</code></pre>
<pre><code>## [1] 85.40075 84.84875 84.40192 84.11992 83.71708 83.05742</code></pre>
<pre><code>## [1] &quot;SPY Moving Average (First 5 Values):&quot;</code></pre>
<pre><code>## [1] 453.5700 452.5163 451.4847 450.4407 449.3170 448.0997</code></pre>
<pre><code>##     rowname (Intercept) spy_close_log       Date   a_value beta_value
## 234     234   1.0882913     0.4728091 2022-12-06 1.0882913  0.4728091
## 235     235   0.9456553     0.4956148 2022-12-07 0.9456553  0.4956148
## 236     236   0.9689239     0.4911233 2022-12-08 0.9689239  0.4911233
## 237     237   0.5835717     0.5546699 2022-12-09 0.5835717  0.5546699
## 238     238   0.9112997     0.4986215 2022-12-12 0.9112997  0.4986215
## 239     239   1.4408603     0.4085211 2022-12-13 1.4408603  0.4085211</code></pre>
<pre><code>##         DATE portfolio_open portfolio_high portfolio_low portfolio_close
## 1 2022-01-03       107.0075       111.9040      104.9625        107.4900
## 2 2022-01-04       107.3025       108.5075      100.8925        104.3475
## 3 2022-01-05       103.3975       104.4905       92.9675         93.6025
## 4 2022-01-06        96.7000       100.3450       88.8000         94.5175
## 5 2022-01-07       103.6625       107.0375       94.4100         97.7350
## 6 2022-01-10        94.6375        96.6225       87.7700         94.3775</code></pre>
<pre><code>## [1] &quot;First 5 Values of Portfolio RSI: &quot;</code></pre>
<pre><code>## [1] 14.285714 14.285714 14.285714  7.142857  7.142857 14.285714</code></pre>
<pre><code>## [1] &quot;First 5 Values of SPY RSI: &quot;</code></pre>
<pre><code>## [1] 28.57143 28.57143 28.57143 28.57143 35.71429 42.85714</code></pre>
<p>We now have all the required information for starting our data visualization!</p>
</div>
<div id="missing-value-analysis" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Missing Value Analysis<a href="data.html#missing-value-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Although we have covered that there is missing data, we can visualize it by using a missing pattern graph, which can be found below.Please note that for the purposes of finding missing data, we merge the datasets to see if their are overarching patterns in the missing data.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>Although the labels are messy, one thing is clear: every single column is a complete case, which means that we do not have missing data throughout all our columns in all of our different stocks. We can also have an alternate view by using a heatmap of missing views:
<img src="finalproj_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>Again, we see that out of all our observations, all of them are present, signifying that there are no missing values in our data.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="proposal.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="results.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/nho1cu/StockProject/edit/main/data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/nho1cu/StockProject/blob/main/data.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
